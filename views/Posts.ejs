<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Posts</title>
    <link rel="stylesheet" href="/css/Posts.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="/profile">View Profile</a></li>
                <li><a href="/Posts/Create">Create Post</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>
    <section class="posts">
        <h2>Posts</h2>
        <% posts.forEach((post)=>{ %>
            <div class="post-container">
                <!-- Post Header -->
                <div class="post-header">
                <div class='postprofile'>
                    <img src="/pics/<%= post.UserId.ProfilePic %>" alt="Profile Picture" class="postprofile-picture">
                    </div>
                    <div class="postUsername"><a href="" style="color: rgb(29, 97, 215); text-decoration: none;"><%= post.UserId.Name %></a></div>
                    <% let date = (String(post.Date)).replace('GMT+0530 (India Standard Time)','') %>
                    <div class="post-date">Posted on: <p id='date' style="align-items: center;"><%= date %></p></div>
                </div>
                <h3><%= post.PostTitle %></h3>
                <!-- Post Image -->
                <img src="/pics/<%= post.PostPicture %>" alt="Post Image" class="post-image">
                <!-- Post Actions -->
                <div class="post-actions">
                    <div class="like-comment-share">
                        <span style="padding-right: 3px; font-size: 20px;"><%= post.LikedUsers.length %></span>
                            <% if(post.LikedUsers.indexOf(Id) == -1) { %>
                                <a href='/posts/like/<%= post._id %>'><i class="fa-solid fa-thumbs-up"
                                    style="color: rgb(237, 237, 237);
                                    font-size: 20px;"></i></a>
                            <% } else{ %>
                                <a href='/posts/like/<%= post._id %>'><i class="fa-solid fa-thumbs-up"
                                    style="color: rgb(36, 160, 255);
                                    font-size: 20px;"></i></a>
                            <% } %>
                    </div>
                    <div class="comment-section">
                        <input type="text" placeholder="Write a comment...">
                        <button>Comment</button>
                    </div>
                        <a class="comments-button"">0<i class="fa-solid fa-comments" style="padding-left: 5px;"></i></a>
                        <% if(post.UserId._id == Id) {%>
                            <a href="/delete/<%= post._id %>" style="margin-left: 50px;"><i class="fa fa-trash" aria-hidden="true" style="color: red; font-size: 20px;"></i></a>
                        <% } %>
                </div>
                <!-- Comments -->
                <div class="comments-container">
                    <div class="comments">
                        <div id='commentdiv'>
                            <img src="commenter-profile-picture.jpg" alt="Commenter Profile Picture" class="commenter-profile-picture">
                            <div class="commenter-username">John Doe</div>
                            <div class="comment-text">Love this post!</div>
                            </div>
                        <!-- Comments will be displayed here -->
                    </div>
                </div>
            </div>
        <% }) %>

    </section>
    <script src="https://kit.fontawesome.com/99ff7bcda2.js" crossorigin="anonymous"></script>
    <script src="/public/js/Posts.js"></script>
</body>
</html>